(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{242:function(e,t,a){e.exports=a(415)},247:function(e,t,a){},415:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(57),l=a.n(i),o=(a(247),a(10)),c=a(11),s=a(13),u=a(12),d=a(14),m=a(426),p=a(432),h=a(431),E=(a(48),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).foo=function(){var e=window.location.href,t=e.lastIndexOf("/")+1,a=e.substr(t),n=document.getElementsByClassName("navBar")[0].children;""===a?n[0].children[0].style.color="yellow":"MyReceipts"===a?n[1].children[0].style.color="yellow":"Signup"===a?n[2].children[0].style.color="yellow":"login"===a&&(n[3].children[0].style.color="yellow")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.foo()}},{key:"render",value:function(){return r.a.createElement("nav",null,r.a.createElement("h2",null,"ReceiptsPro"),r.a.createElement("ul",{className:"navBar"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Main")),r.a.createElement("li",null,r.a.createElement("a",{href:"/MyReceipts"},"My receipts")),r.a.createElement("li",null,r.a.createElement("a",{href:"/Signup"},"Sign up")),r.a.createElement("li",{id:"lastBarLi"},r.a.createElement("a",{href:"/login"},"Login"))))}}]),t}(n.Component)),v=a(22),b=a(133),f=a(31);function g(){var e=Object(b.a)(["\n\n    mutation($date:Date!,$description:String,$uuid:UUID!,$item_name:String!,$cost:Int!) {\n      updateReceipt(\n        date:$date,\n        description:$description,\n        uuid:$uuid\n        itemName: $item_name,\n        price: $cost,\n\n      ){\n        uuid\n        date\n      }\n    }\n"]);return g=function(){return e},e}function y(){var e=Object(b.a)(["\n  mutation($uuid:UUID!){\n    removeReceipt(\n      uuid:$uuid\n    ){\n      uuid\n    }\n  }\n"]);return y=function(){return e},e}function O(){var e=Object(b.a)(["\n  {\n    ListCurrentUserReceipts{\n      date\n      description\n      imageUrl\n      itemName\n      price\n      uuid\n    }\n  }\n"]);return O=function(){return e},e}function C(){var e=Object(b.a)(["\n\n    mutation($date:Date!,$description:String,$imageUrl:String!,$item_name:String!,$cost:Int!) {\n      createReceipt(\n        date:$date,\n        description:$description,\n        imageUrl: $imageUrl,\n        itemName: $item_name,\n        price: $cost,\n\n      ){\n        uuid\n      }\n    }\n"]);return C=function(){return e},e}function S(){var e=Object(b.a)(["\n  mutation($email:String,$password:String){\n    loginUser(\n      email:$email,\n      password:$password\n    ){\n      accessToken\n      idToken\n    }\n  }\n"]);return S=function(){return e},e}function j(){var e=Object(b.a)(["\n  mutation($email:String,$confirmationCode:String){\n    ConfirmUserRegistration(\n      email:$email,\n      confirmationCode:$confirmationCode\n    )\n}\n"]);return j=function(){return e},e}function R(){var e=Object(b.a)(["\n  mutation($email:String,$familyName:String, $name:String!, $password:String!){\n    CreateUser(\n      email:$email,\n      familyName:$familyName,\n      name:$name,\n      password:$password\n    ){\n      uuid\n    }\n  }\n"]);return R=function(){return e},e}var w=Object(f.b)(R()),D=Object(f.b)(j()),A=Object(f.b)(S()),k=Object(f.b)(C()),I=Object(f.b)(O()),M=Object(f.b)(y()),L=Object(f.b)(g()),B=a(428),U=a(427),N=a(208),x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={modalOpen:!1},a.handleOpen=function(e){a.setState({modalOpen:!0}),document.getElementById("errHeader").innerHTML=e},a.handleClose=function(){return a.setState({modalOpen:!1})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(B.a,{open:this.state.modalOpen,onClose:this.handleClose,basic:!0,size:"small"},r.a.createElement("div",{id:"errorAlert"},r.a.createElement("div",{className:"close-modal",onClick:this.handleClose}," \u2716 "),r.a.createElement("div",{id:"alertErrorTopHeader"},"Ooops!"),r.a.createElement("h3",{id:"errHeader"}," ErrorText "),r.a.createElement(B.a.Actions,null,r.a.createElement(U.a,{color:"green",onClick:this.handleClose,inverted:!0},r.a.createElement(N.a,{name:"checkmark"})," Close"))))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validateCode=function(e){var t=document.getElementById("inputCCode");if(!(t.value<6))return t.style.borderColor="#5ED50F",!0;t.style.borderColor="red"},a.sendCode=function(e){a.setState({error:!1}),e.preventDefault(),a.validateCode()&&a.props.submitMutation({variables:{email:a.props.emailForCCode,confirmationCode:a.state.code}}).catch(function(e){a.child.current.handleOpen(e),a.setState({error:!0})}).then(function(e){a.state.error||a.props.history.push("/Login")})},a.child=r.a.createRef(),a.state={code:"",error:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(x,{ref:this.child}),r.a.createElement("form",{className:"ConfirmForm",onSubmit:this.sendCode},r.a.createElement("div",null,r.a.createElement("span",null,"Massage with a confirmation code was sent to your e-mail"),r.a.createElement("br",null),r.a.createElement("input",{id:"inputCCode",placeholder:"Enter your confirmation code",type:"text",onChange:function(t){return e.setState({code:t.target.value})},onMouseOut:this.validateCode}),r.a.createElement("br",null),r.a.createElement("button",{id:"submitCodeForm"},"Submit"))))}}]),t}(n.Component),T=Object(v.graphql)(D,{name:"submitMutation"})(P),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validateName=function(e){var t=document.getElementById("errorSpan"),a=document.getElementById("inputN");if(!(a.value<2))return a.style.borderColor="#5ED50F",!0;t.style.visibility="visible",a.style.borderColor="red",t.innerHTML="Name has to posess 2 or more symbols"},a.validateMail=function(e){var t=document.getElementById("inputEmail"),a=document.getElementById("errorSpan");if(""!==t.value&&/[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}/gim.test(t.value))return t.style.borderColor="#5ED50F",!0;a.style.visibility="visible",t.style.borderColor="red",a.innerHTML="Email is incorrect"},a.validateFname=function(e){var t=document.getElementById("inputF"),a=document.getElementById("errorSpan");if(!(t.value.length<2))return t.style.borderColor="#5ED50F",!0;a.style.visibility="visible",t.style.borderColor="red",a.innerHTML="Family name has to posess 2 or more symbols"},a.validatePass=function(e){var t=document.getElementById("inputPass"),a=document.getElementById("errorSpan");if(!(t.value.length<6))return t.style.borderColor="#5ED50F",!0;a.style.visibility="visible",t.style.borderColor="red",a.innerHTML="Password has to posess 6 or more symbols"},a.arePassesMatch=function(e){var t=document.getElementById("inputPass"),a=document.getElementById("inputPass1"),n=document.getElementById("errorSpan");if(a.value===t.value&&""!==a.value)return t.style.borderColor="#5ED50F",a.style.borderColor="#5ED50F",!0;n.style.visibility="visible",t.style.borderColor="red",a.style.borderColor="red",n.innerHTML="Passwords does not match"},a.isValidForm=function(){return a.validateName()&&a.validateMail()&&a.validateFname()&&a.validatePass()&&a.arePassesMatch()},a.sendRegistration=function(e){document.getElementById("errorSpan").style.visibility="hidden",e.preventDefault(),a.isValidForm()&&a.props.createNewUser({variables:{email:a.state.email,familyName:a.state.familyName,name:a.state.name,password:a.state.password}}).catch(function(e){a.child.current.handleOpen(e),a.setState({error:!0})}).then(function(e){a.state.error||a.setState({signUpDone:!0})})},a.CCRender=function(){if(a.state.signUpDone)return r.a.createElement(T,{history:a.props.history,emailForCCode:a.state.email})},a.child=r.a.createRef(),a.state={email:"",familyName:"",name:"",password:"",signUpDone:!1,error:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(x,{ref:this.child}),r.a.createElement("form",{className:"SignUpForm",onSubmit:this.sendRegistration},r.a.createElement("div",null,r.a.createElement("input",{id:"inputN",placeholder:"Enter your name",type:"text",onChange:function(t){return e.setState({name:t.target.value})},onMouseOut:this.validateName}),r.a.createElement("br",null),r.a.createElement("input",{id:"inputF",placeholder:"Enter your family name",type:"text",onChange:function(t){return e.setState({familyName:t.target.value})},onMouseOut:this.validateFname}),r.a.createElement("br",null),r.a.createElement("input",{id:"inputEmail",placeholder:"Enter your email",type:"email",onChange:function(t){return e.setState({email:t.target.value})},onMouseOut:this.validateMail}),r.a.createElement("br",null),r.a.createElement("input",{id:"inputPass",placeholder:"Enter your password",type:"password",onChange:function(t){return e.setState({password:t.target.value})},onMouseOut:this.validatePass}),r.a.createElement("br",null),r.a.createElement("input",{id:"inputPass1",placeholder:"Confirm your password",type:"password",onChange:function(t){return e.setState({itemName:t.target.value})},onMouseOut:this.arePassesMatch}),r.a.createElement("br",null),r.a.createElement("button",{id:"submitSignForm"},"Submit"),r.a.createElement("p",null,"Already have an account?"),r.a.createElement("a",{href:"/Login"},"Login"),"  ",r.a.createElement("span",{id:"errorSpan"},"Something is wrong"),r.a.createElement("br",null))),r.a.createElement("div",null,this.CCRender()))}}]),t}(n.Component),H=Object(v.graphql)(w,{name:"createNewUser"})(F),V=new f.a({uri:"https://whopping-parched-xoloitzcuintli.gigalixirapp.com/"}),J=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(v.ApolloProvider,{client:V},r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement("h2",null,"Registration form"),r.a.createElement("br",null),r.a.createElement(H,{history:this.props.history})))}}]),t}(n.Component),G=a(232),q=a(46),X=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).calculateExp=function(){var e=a.props.passedData,t=0,n=0,r=new Date;r.setMonth(r.getMonth()-1),e.forEach(function(e){t=e.price+t,new Date(e.date)>r&&(n=e.price+n)}),document.getElementById("expences").innerHTML="Overall you spent "+t,document.getElementById("monthExp").innerHTML="This month you spent "+n},a.displayClickedRes=function(){var e=a.props.passedData,t=a.props.activeLi;document.getElementById("receiptDetails").style.visibility="visible",document.getElementById("Rprice").innerHTML=e[t].price,document.getElementById("Rdescription").innerHTML=e[t].description,document.getElementById("receiptPict").src=e[t].imageUrl,document.getElementById("Rdate").innerHTML=e[t].date,document.getElementById("itemName").innerHTML="You bought "+e[t].itemName,a.calculateExp()},a.deleteCurrentReceipt=function(){var e=a.props.passedData;console.log(e[a.props.activeLi].uuid);var t=e[a.props.activeLi].uuid;a.props.sidebarProps.removeReceipt({variables:{uuid:t}}).catch(function(e){a.setState({deleteError:!0}),a.child.current.handleOpen("You did not created this receipt  "+e)}).then(function(e){a.state.deleteError||(alert("Receipt was deleted"),a.setState({deleteError:!1}),document.getElementById("allReceipts").children[a.props.activeLi].remove(),a.props.closeDescExt())})},a.changeBar=function(){a.setState({editReceiptOpen:!a.state.editReceiptOpen}),a.props.callback(!a.state.editReceiptOpen)},a.child=r.a.createRef(),a.state={deleteError:!1,editReceiptOpen:1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){""!==this.props.activeLi&&this.displayClickedRes(),e.activeLi!==this.props.activeLi&&this.setState({deleteError:!1})}},{key:"componentDidMount",value:function(){""!==this.props.activeLi&&this.displayClickedRes()}},{key:"render",value:function(){var e=this;return console.log("updated"),r.a.createElement("div",null,r.a.createElement(x,{ref:this.child}),r.a.createElement("div",{id:"receiptDetails"},r.a.createElement("h2",{id:"itemName"},"Second div"),r.a.createElement("div",{id:"expInfo"},r.a.createElement("p",{id:"expences"},"Your overall expences"),r.a.createElement("p",{id:"monthExp"},"Your month expences")),r.a.createElement("div",{id:"wholeReceiptsInfo"},r.a.createElement("h4",null,"Price"),r.a.createElement("span",{id:"Rprice"},"..."),r.a.createElement("h4",null,"Description"),r.a.createElement("span",{id:"Rdescription"},"..."),r.a.createElement("h4",null,"Looks like"),r.a.createElement("div",{id:"imgContainer"},r.a.createElement("img",{id:"receiptPict",src:"https://tse3.mm.bing.net/th?id=OIP.ovbhqiA_tvBo8XWz6adbugHaHa&pid=Api&w=348&h=348&rs=1&p=0",alt:"receipt"})),r.a.createElement("h4",null,"Purchased"),r.a.createElement("span",{id:"Rdate"}),r.a.createElement("br",null),r.a.createElement("div",{id:"deleteImgContainer"},r.a.createElement("img",{src:"data:image/png;base64,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",alt:"delete",onClick:this.deleteCurrentReceipt}),r.a.createElement("p",{id:"deleteReceiptDesc"},"Delete this receipt"),r.a.createElement("div",{id:"detailsButtons"},r.a.createElement("button",{id:"ClosedDescription",onClick:function(t){return e.props.closeDescExt()}},"Close"),r.a.createElement("button",{id:"EditReceiptButton",onClick:function(t){e.changeBar()}},"Edit this receipt"))))))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validateIname=function(e){var t=document.getElementById("EdINamefield");if(!(t.value.length<2))return t.style.borderColor="#5ED50F",!0;a.errSpan.current.style.visibility="visible",t.style.borderColor="red",a.errSpan.currentinnerHTML="Has to be at least two letters"},a.validateIprice=function(e){var t=document.getElementById("EdPricefield");if(/^[0-9]+$/.test(t.value))return t.style.borderColor="#5ED50F",!0;a.errSpan.current.style.visibility="visible",t.style.borderColor="red",a.errSpan.current.innerHTML="Price should contain only numeric characters"},a.submitEditForm=function(e){var t=(new Date).toISOString().substring(0,10);e.preventDefault(),a.validateIname()&&a.validateIprice()&&a.props.updateReceipt({variables:{date:t,description:a.state.description,item_name:a.state.itemName,cost:parseInt(a.state.price),uuid:a.props.passedData[a.props.activeLi].uuid,submitReceiptDone:!1}}).catch(function(e){a.setState({editError:!0}),a.child.current.handleOpen("Thats likely not your receipt ..."+e)}).then(function(e){a.state.editError||window.location.reload()})},a.changeBar=function(){a.setState({openDetails:!a.state.openDetails}),a.props.callback(!a.state.openDetails)},a.errSpan=r.a.createRef(),a.child=r.a.createRef(),a.state={updateComp:0,itemName:a.props.passedData[a.props.activeLi].itemName,price:a.props.passedData[a.props.activeLi].price,description:a.props.passedData[a.props.activeLi].description,openDetails:0,editError:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){""!==e.activeLi&&this.setState({itemName:e.passedData[e.activeLi].itemName,price:e.passedData[e.activeLi].price,description:e.passedData[e.activeLi].description})}},{key:"componentDidUpdate",value:function(e,t){e.activeLi!==this.props.activeLi&&this.setState({editError:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(x,{ref:this.child}),r.a.createElement("div",{id:"editReceiptComp"},r.a.createElement("button",{onClick:function(t){e.changeBar()}},"Back"),r.a.createElement("form",{id:"EditReceipt",onSubmit:this.submitEditForm},r.a.createElement("div",null,r.a.createElement("label",null,"Edit Name"),r.a.createElement("input",{value:this.state.itemName,id:"EdINamefield",type:"text",onMouseOut:this.validateIname,onChange:function(t){return e.setState({itemName:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Edit price"),r.a.createElement("input",{value:this.state.price,id:"EdPricefield",type:"text",onMouseOut:this.validateIprice,onChange:function(t){return e.setState({price:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{className:"field"},"Edit description"),r.a.createElement("input",{value:this.state.description,id:"EdDescfield",type:"text",onChange:function(t){return e.setState({description:t.target.value})}})),r.a.createElement("span",{id:"EderrorSpan",ref:this.errSpan},"There is a mistake"),r.a.createElement("br",null),r.a.createElement("button",null,"Edit this receipt"))))}}]),t}(n.Component),W=Object(v.graphql)(L,{name:"updateReceipt"})(z),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).showAllTitles=function(){console.log(a.props)},a.sortData=function(e){return e.sort(function(e,t){return new Date(t.date)-new Date(e.date)})},a.displayReceipts=function(e){var t=a.state.sortChecked?a.sortData(a.props.showReceipts.ListCurrentUserReceipts):a.props.showReceipts.ListCurrentUserReceipts;return a.props.showReceipts.loading?r.a.createElement("div",null,"Loading receipts..."):t?t.map(function(e,t){return r.a.createElement("li",{value:t,key:t,onClick:function(e){a.setState({activeReceiptValue:e.target.value})}}," ",e.itemName," ")}):(alert("You are not logged in"),void a.props.history.push("/Login"))},a.closeDescription=function(){document.getElementById("receiptDetails").style.visibility="hidden"},a.checkSorting=function(e){a.setState({sortChecked:e.target.checked}),e.target.disabled=!0},a.callBackDetails=function(e){a.setState({editReceiptOpen:e})},a.state={sortChecked:!1,activeReceiptValue:"",deleteError:!1,editReceiptOpen:1,reloadAfterAdd:a.props.noReload},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"allReceiptsComp"},this.state.editReceiptOpen?r.a.createElement(X,{callback:this.callBackDetails,closeDescExt:this.closeDescription,DeleteErrExtState:this.state.deleteError,sidebarProps:this.props,activeLi:this.state.activeReceiptValue,passedData:this.props.showReceipts.ListCurrentUserReceipts}):r.a.createElement(W,{activeLi:this.state.activeReceiptValue,passedData:this.props.showReceipts.ListCurrentUserReceipts,callback:this.callBackDetails}),r.a.createElement("div",{id:"sidebar"},r.a.createElement("h2",{id:"YourReceiptsHeader"},"Your receipts"),r.a.createElement("div",{id:"checkBoxContainer"},r.a.createElement("input",{id:"sort",type:"checkbox",onChange:this.checkSorting}),r.a.createElement("label",{htmlFor:"sort"},"Sort by date")),r.a.createElement("ul",{id:"allReceipts"},this.displayReceipts(),";"))))}}]),t}(n.Component),Q=Object(v.compose)(Object(v.graphql)(I,{name:"showReceipts"}),Object(v.graphql)(M,{name:"removeReceipt"}))(Y),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validateIname=function(e){var t=document.getElementById("INamefield");if(!(t.value<2))return t.style.borderColor="#5ED50F",!0;a.errSpan.current.style.visibility="visible",t.style.borderColor="red",a.errSpan.current.innerHTML="Has to be at least two letters"},a.validateIprice=function(e){var t=document.getElementById("Pricefield");if(/^[0-9]+$/.test(t.value))return t.style.borderColor="#5ED50F",!0;a.errSpan.current.style.visibility="visible",t.style.borderColor="red",a.errSpan.current.innerHTML="Price should contain only numeric characters"},a.validateUrl=function(e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i"),n=document.getElementById("Urlfield");if(t.test(n.value))return n.style.borderColor="#5ED50F",!0;a.errSpan.current.style.visibility="visible",n.style.borderColor="red",a.errSpan.current.innerHTML="Has to be a URL adress"},a.getJWT=function(){return localStorage.getItem("my-jwt")},a.submitReceiptForm=function(e){a.setState({createReceiptErr:!1});var t=(new Date).toISOString().substring(0,10);e.preventDefault(),a.validateIname()&&a.validateIprice()&&a.validateUrl()&&a.props.createReceipt({variables:{date:t,description:a.state.description,imageUrl:a.state.imageUrl,item_name:a.state.itemName,cost:parseInt(a.state.price)}}).catch(function(e){a.child.current.handleOpen(e),a.setState({createReceiptErr:!0})}).then(function(e){a.state.createReceiptErr||window.location.reload()})},a.child=r.a.createRef(),a.errSpan=r.a.createRef(),a.state={itemName:"",price:"",description:"",imageUrl:"",createReceiptErr:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(x,{ref:this.child}),r.a.createElement("h2",{id:"CreateReceiptHeader"},"Create your receipt"),r.a.createElement("form",{id:"AddReceipt",onSubmit:this.submitReceiptForm},r.a.createElement("div",null,r.a.createElement("label",null,"Enter an item name"),r.a.createElement("input",{id:"INamefield",type:"text",onMouseOut:this.validateIname,onChange:function(t){return e.setState({itemName:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Enter its price"),r.a.createElement("input",{id:"Pricefield",type:"text",onMouseOut:this.validateIprice,onChange:function(t){return e.setState({price:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{className:"field"},"Add a description"),r.a.createElement("input",{id:"Descfield",type:"text",onChange:function(t){return e.setState({description:t.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",{className:"field"},"Enter a url of your item"),r.a.createElement("input",{id:"Urlfield",type:"text",onMouseOut:this.validateUrl,onChange:function(t){return e.setState({imageUrl:t.target.value})}}),r.a.createElement("span",{id:"errorSpan",ref:this.errSpan},"There is a mistake")),r.a.createElement("br",null),r.a.createElement("button",null,"Add a receipt")),r.a.createElement(Q,{history:this.props.history,ref:"SideComp"}))}}]),t}(n.Component),K=Object(v.graphql)(k,{name:"createReceipt"})(Z),$=a(65),_=a(230),ee=a(429),te=Object($.b)({uri:" https://whopping-parched-xoloitzcuintli.gigalixirapp.com/"}),ae=Object(_.a)(function(e,t){var a=t.headers,n=localStorage.getItem("my-jwt");return{headers:Object(G.a)({},a,{Authorization:n?"Bearer ".concat(n):""})}}),ne=new q.default({link:ae.concat(te),cache:new ee.a}),re=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(v.ApolloProvider,{client:ne},r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement("br",null),r.a.createElement(K,{history:this.props.history})))}}]),t}(n.Component),ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).validateMail=function(e){var t=document.getElementById("inputEmail");if(""!==t.value&&/[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}/gim.test(t.value))return t.style.borderColor="#5ED50F",!0;a.errSpan.current.style.visibility="visible",t.style.borderColor="red",a.errSpan.current.innerHTML="Email is incorrect"},a.validatePass=function(e){var t=document.getElementById("inputPass");if(!(t.value.length<6))return t.style.borderColor="#5ED50F",!0;a.errSpan.current.style.visibility="visible",t.style.borderColor="red",a.errSpan.current.innerHTML="Password has to posess 6 or more symbols"},a.sendLogin=function(e){e.preventDefault(),a.validateMail()&&a.validatePass()&&(a.setState({error:!1}),a.props.loginDamnUser({variables:{email:a.state.email,password:a.state.password}}).catch(function(e){a.setState({error:!0}),a.errSpan.current.style.visibility="hidden",a.child.current.handleOpen(e)}).then(function(e){!a.state.error&&e.data&&(localStorage.setItem("my-jwt",e.data.loginUser.accessToken),a.props.history.push("/MyReceipts"))}))},a.errSpan=r.a.createRef(),a.child=r.a.createRef(),a.state={email:"",password:"",error:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(x,{ref:this.child}),r.a.createElement("br",null),r.a.createElement("form",{className:"SignUpForm",onSubmit:this.sendLogin},r.a.createElement("div",null,r.a.createElement("input",{id:"inputEmail",placeholder:"Enter your email",type:"email",onChange:function(t){return e.setState({email:t.target.value})},onMouseOut:this.validatePass}),r.a.createElement("br",null),r.a.createElement("input",{id:"inputPass",placeholder:"Enter your password",type:"password",onChange:function(t){return e.setState({password:t.target.value})},onMouseOut:this.validateMail}),r.a.createElement("br",null),r.a.createElement("button",{id:"submitLoginForm"},"Submit"),r.a.createElement("p",null,"Dont have an account?"),r.a.createElement("a",{href:"/Signup"},"Create one"),"  ",r.a.createElement("span",{id:"errorSpan",ref:this.errSpan},"Here is a span"))))}}]),t}(n.Component),le=Object(v.graphql)(A,{name:"loginDamnUser"})(ie),oe=new f.a({uri:"https://whopping-parched-xoloitzcuintli.gigalixirapp.com/"}),ce=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(v.ApolloProvider,{client:oe},r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(le,{history:this.props.history})))}}]),t}(n.Component),se=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"mainPageBackground"},r.a.createElement(E,null),r.a.createElement("br",null),r.a.createElement("header",{className:"mainHeader"},r.a.createElement("h1",{className:"mainHeader"},"Wellcome to ReceiptsPro"),r.a.createElement("p",null,"App for recording your receipts"),r.a.createElement("button",{id:"getStartedButt"},r.a.createElement("a",{href:"/Signup"},"Get Started"))),r.a.createElement("div",{id:"mainMiddle"},r.a.createElement("div",{id:"descriptionContainer"},r.a.createElement("h2",null,"ReceiptsPro"),r.a.createElement("p",null,"In order to proceed you should sign up first, by pressing the 'get started button' or by clicking 'Sign in' on the navbar, then just log in using you email and password after that you will be redirected to a page where you can create and observe receipts;")),r.a.createElement("div",{id:"imgLogoContainer"},r.a.createElement("img",{src:"https://t0.rbxcdn.com/276ff4919adca2f2f3f8c58285446f31",alt:"icon"}))))}}]),t}(n.Component),ue=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{path:"/",exact:!0,component:se}),r.a.createElement(h.a,{path:"/Signup",exact:!0,component:J}),r.a.createElement(h.a,{path:"/MyReceipts",exact:!0,component:re}),r.a.createElement(h.a,{path:"/Login",exact:!0,component:ce})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t,a){}},[[242,2,1]]]);
//# sourceMappingURL=main.ed80bf3e.chunk.js.map